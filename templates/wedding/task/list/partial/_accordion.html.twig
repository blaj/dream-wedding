<div class="accordion">
  <div class="accordion-item mb-3">
    <h2 class="accordion-header">
      <button
          class="accordion-button fw-bold"
          type="button"
          data-bs-toggle="collapse"
          data-bs-target="#task-group-{{ accordionItemId }}"
          aria-expanded="true">
        {{ accordionItemName }}
      </button>
    </h2>

    <div id="task-group-{{ accordionItemId }}" class="accordion-collapse collapse show">
      <div class="accordion-body table-responsive">
          <table class="table table-hover">
            <thead>
              <tr>
                <th></th>

                <th>
                  {{ 'name'|trans }}
                </th>

                <th>
                  {{ 'on-date'|trans }}
                </th>

                <th>
                  {{ 'completed'|trans }}
                </th>

                <th>
                  {{ 'actions'|trans }}
                </th>
              </tr>
            </thead>

            <tbody
                data-controller="task-drag-and-drop"
                data-task-drag-and-drop-wedding-id-value="{{ weddingId }}"
                data-group-id="{{ groupId }}">
              {% if tasksListItemDto|length == 0 %}
                {% include 'partial/_empty-list-row.html.twig' with { emptyRowColspan: 5 } only %}
              {% endif %}

              {% for taskDto in tasksListItemDto %}
                <tr data-task-id="{{ taskDto.id }}">
                  <td>
                    <i class="bi bi-list handle"></i>
                  </td>

                  <td>
                    {{ taskDto.name }}
                  </td>

                  <td>
                    {{ taskDto.onDate|dateFormat('Y-m-d H:i') }}
                  </td>

                  <td>
                    <label for="task-update-completed-{{ taskDto.id }}" class="visually-hidden">
                      {{ 'completed'|trans }}
                    </label>

                    <input
                        data-controller="task-update-completed"
                        data-action="task-update-completed#updateCompleted"
                        data-task-update-completed-id-value="{{ taskDto.id }}"
                        data-task-update-completed-wedding-id-value="{{ weddingId }}"
                        id="task-update-completed-{{ taskDto.id }}"
                        type="checkbox"
                        value="1"
                        name="updateCompleted" {{ taskDto.completed ? 'checked' : '' }}>
                  </td>

                  <td class="d-flex">
                    <a
                        href="{{ path('wedding_task_details', { weddingId: weddingId, id: taskDto.id }) }}"
                        class="btn btn-primary btn-sm me-1"
                        data-bs-toggle="tooltip"
                        data-bs-title="{{ 'details'|trans }}">
                      <i class="bi bi-eye"></i>
                    </a>

                    <a
                        href="{{ path('wedding_task_update', { weddingId: weddingId, id: taskDto.id }) }}"
                        class="btn btn-secondary btn-sm me-1"
                        data-bs-toggle="tooltip"
                        data-bs-title="{{ 'edit'|trans }}">
                      <i class="bi bi-pencil"></i>
                    </a>

                    <form
                        action="{{ path('wedding_task_delete', { weddingId: weddingId, id: taskDto.id }) }}"
                        method="post">
                      <button
                          type="submit" class="btn btn-danger btn-sm"
                          data-bs-toggle="tooltip"
                          data-bs-title="{{ 'delete'|trans }}">
                        <i class="bi bi-trash3"></i>
                      </button>

                      <input type="hidden" name="_method" value="DELETE">
                    </form>
                  </td>
                </tr>
              {% endfor %}
            </tbody>
          </table>
      </div>
    </div>
  </div>
</div>